{
  "openapi": "3.0.0",
  "info": {
    "title": "Queueing Service API",
    "description": "RESTful API for FIFO task queue operations. Provides endpoints for managing named task queues with support for multiple named instances. All endpoints support both default and instance-specific operations.",
    "version": "1.0.15",
    "contact": {
      "name": "NooblyJS Core Team",
      "url": "https://github.com/nooblyjs/nooblyjs-core"
    },
    "license": {
      "name": "ISC"
    }
  },
  "servers": [
    {
      "url": "http://localhost:3001",
      "description": "Development server"
    }
  ],
  "components": {
    "schemas": {
      "Task": {
        "type": "object",
        "description": "A task object to be queued",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique task identifier"
          },
          "data": {
            "type": "object",
            "description": "Task data payload"
          },
          "timestamp": {
            "type": "number",
            "description": "Task creation timestamp"
          }
        }
      },
      "Queue": {
        "type": "object",
        "description": "Queue information",
        "properties": {
          "name": {
            "type": "string",
            "description": "Queue name"
          },
          "size": {
            "type": "integer",
            "description": "Number of tasks in the queue"
          },
          "createdAt": {
            "type": "number",
            "description": "Queue creation timestamp"
          }
        }
      },
      "QueueInstance": {
        "type": "object",
        "description": "Queue service instance information",
        "properties": {
          "name": {
            "type": "string",
            "description": "Instance name",
            "example": "default"
          },
          "provider": {
            "type": "string",
            "description": "Provider type",
            "example": "memory"
          },
          "status": {
            "type": "string",
            "description": "Instance status",
            "example": "active"
          }
        }
      },
      "Analytics": {
        "type": "object",
        "description": "Queue analytics data",
        "properties": {
          "stats": {
            "type": "object",
            "description": "Queue statistics"
          },
          "distribution": {
            "type": "object",
            "description": "Queue distribution data"
          },
          "timeline": {
            "type": "array",
            "description": "Timeline of queue operations"
          },
          "queueList": {
            "type": "array",
            "description": "List of queues with their stats"
          }
        }
      },
      "Settings": {
        "type": "object",
        "description": "Queue service settings",
        "properties": {
          "maxQueueSize": {
            "type": "integer",
            "description": "Maximum queue size limit"
          },
          "timeout": {
            "type": "integer",
            "description": "Operation timeout in milliseconds"
          },
          "logLevel": {
            "type": "string",
            "description": "Logging level"
          }
        }
      },
      "Error": {
        "type": "object",
        "description": "Error response",
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "error": {
            "type": "string",
            "description": "Error message"
          },
          "message": {
            "type": "string",
            "description": "Detailed error message"
          }
        }
      },
      "InstancesResponse": {
        "type": "object",
        "description": "List of available instances",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "instances": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/QueueInstance"
            }
          },
          "total": {
            "type": "integer",
            "description": "Total number of instances"
          }
        }
      }
    },
    "securitySchemes": {
      "apiKey": {
        "type": "apiKey",
        "in": "header",
        "name": "x-api-key",
        "description": "API key for authentication"
      },
      "bearerToken": {
        "type": "http",
        "scheme": "bearer",
        "description": "Bearer token for authentication"
      }
    }
  },
  "security": [
    {
      "apiKey": []
    },
    {
      "bearerToken": []
    }
  ],
  "paths": {
    "/services/queueing/api/status": {
      "get": {
        "tags": ["Status"],
        "summary": "Get service status",
        "description": "Returns the operational status of the queueing service. No authentication required.",
        "operationId": "getStatus",
        "security": [],
        "responses": {
          "200": {
            "description": "Service is running",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string",
                  "example": "queueing api running"
                }
              }
            }
          },
          "500": {
            "description": "Service error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/services/queueing/api/instances": {
      "get": {
        "tags": ["Instances"],
        "summary": "List all instances",
        "description": "Returns a list of all available queueing service instances with their status and provider information.",
        "operationId": "listInstances",
        "security": [],
        "responses": {
          "200": {
            "description": "List of instances",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InstancesResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error retrieving instances",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/services/queueing/api/enqueue/{queueName}": {
      "post": {
        "tags": ["Queue Operations"],
        "summary": "Add task to queue",
        "description": "Adds a task to the end of the specified queue for processing.",
        "operationId": "enqueueTask",
        "parameters": [
          {
            "name": "queueName",
            "in": "path",
            "required": true,
            "description": "The name of the queue",
            "schema": {
              "type": "string",
              "example": "taskQueue"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["task"],
                "properties": {
                  "task": {
                    "$ref": "#/components/schemas/Task"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Task enqueued successfully",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string",
                  "example": "OK"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing queue name or task",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/services/queueing/api/{instanceName}/enqueue/{queueName}": {
      "post": {
        "tags": ["Queue Operations"],
        "summary": "Add task to queue (instance-specific)",
        "description": "Adds a task to the end of a named queue instance for processing.",
        "operationId": "enqueueTaskInstance",
        "parameters": [
          {
            "name": "instanceName",
            "in": "path",
            "required": true,
            "description": "The queue instance name",
            "schema": {
              "type": "string",
              "example": "default"
            }
          },
          {
            "name": "queueName",
            "in": "path",
            "required": true,
            "description": "The name of the queue",
            "schema": {
              "type": "string",
              "example": "taskQueue"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["task"],
                "properties": {
                  "task": {
                    "$ref": "#/components/schemas/Task"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Task enqueued successfully",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string",
                  "example": "OK"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing queue name or task",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/services/queueing/api/dequeue/{queueName}": {
      "get": {
        "tags": ["Queue Operations"],
        "summary": "Remove task from queue",
        "description": "Removes and returns the next task from the front of the specified queue.",
        "operationId": "dequeueTask",
        "parameters": [
          {
            "name": "queueName",
            "in": "path",
            "required": true,
            "description": "The name of the queue",
            "schema": {
              "type": "string",
              "example": "taskQueue"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Task dequeued successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Task"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing queue name",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/services/queueing/api/{instanceName}/dequeue/{queueName}": {
      "get": {
        "tags": ["Queue Operations"],
        "summary": "Remove task from queue (instance-specific)",
        "description": "Removes and returns the next task from the front of a named queue instance.",
        "operationId": "dequeueTaskInstance",
        "parameters": [
          {
            "name": "instanceName",
            "in": "path",
            "required": true,
            "description": "The queue instance name",
            "schema": {
              "type": "string",
              "example": "default"
            }
          },
          {
            "name": "queueName",
            "in": "path",
            "required": true,
            "description": "The name of the queue",
            "schema": {
              "type": "string",
              "example": "taskQueue"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Task dequeued successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Task"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing queue name",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/services/queueing/api/size/{queueName}": {
      "get": {
        "tags": ["Queue Operations"],
        "summary": "Get queue size",
        "description": "Returns the current number of tasks in the specified queue.",
        "operationId": "getQueueSize",
        "parameters": [
          {
            "name": "queueName",
            "in": "path",
            "required": true,
            "description": "The name of the queue",
            "schema": {
              "type": "string",
              "example": "taskQueue"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Queue size retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "integer",
                  "example": 5
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing queue name",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/services/queueing/api/{instanceName}/size/{queueName}": {
      "get": {
        "tags": ["Queue Operations"],
        "summary": "Get queue size (instance-specific)",
        "description": "Returns the current number of tasks in a named queue instance.",
        "operationId": "getQueueSizeInstance",
        "parameters": [
          {
            "name": "instanceName",
            "in": "path",
            "required": true,
            "description": "The queue instance name",
            "schema": {
              "type": "string",
              "example": "default"
            }
          },
          {
            "name": "queueName",
            "in": "path",
            "required": true,
            "description": "The name of the queue",
            "schema": {
              "type": "string",
              "example": "taskQueue"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Queue size retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "integer",
                  "example": 5
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing queue name",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/services/queueing/api/queues": {
      "get": {
        "tags": ["Queue Operations"],
        "summary": "List all queues",
        "description": "Returns a list of all queue names in the default instance.",
        "operationId": "listQueues",
        "responses": {
          "200": {
            "description": "List of queue names",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Queue"
                  }
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/services/queueing/api/{instanceName}/queues": {
      "get": {
        "tags": ["Queue Operations"],
        "summary": "List all queues (instance-specific)",
        "description": "Returns a list of all queue names from a named queue instance.",
        "operationId": "listQueuesInstance",
        "parameters": [
          {
            "name": "instanceName",
            "in": "path",
            "required": true,
            "description": "The queue instance name",
            "schema": {
              "type": "string",
              "example": "default"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of queue names",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Queue"
                  }
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/services/queueing/api/purge/{queueName}": {
      "delete": {
        "tags": ["Queue Operations"],
        "summary": "Purge queue",
        "description": "Purges all items from the specified queue.",
        "operationId": "purgeQueue",
        "parameters": [
          {
            "name": "queueName",
            "in": "path",
            "required": true,
            "description": "The name of the queue to purge",
            "schema": {
              "type": "string",
              "example": "taskQueue"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Queue purged successfully",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string",
                  "example": "OK"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing queue name",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/services/queueing/api/{instanceName}/purge/{queueName}": {
      "delete": {
        "tags": ["Queue Operations"],
        "summary": "Purge queue (instance-specific)",
        "description": "Purges all items from a named queue instance.",
        "operationId": "purgeQueueInstance",
        "parameters": [
          {
            "name": "instanceName",
            "in": "path",
            "required": true,
            "description": "The queue instance name",
            "schema": {
              "type": "string",
              "example": "default"
            }
          },
          {
            "name": "queueName",
            "in": "path",
            "required": true,
            "description": "The name of the queue to purge",
            "schema": {
              "type": "string",
              "example": "taskQueue"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Queue purged successfully",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string",
                  "example": "OK"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing queue name",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/services/queueing/api/analytics": {
      "get": {
        "tags": ["Analytics"],
        "summary": "Get queue analytics",
        "description": "Returns analytics data for queue operations including statistics, distribution, timeline, and queue list.",
        "operationId": "getAnalytics",
        "responses": {
          "200": {
            "description": "Analytics data retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Analytics"
                }
              }
            }
          },
          "503": {
            "description": "Analytics not available",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string",
                      "example": "Analytics not available"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/services/queueing/api/{instanceName}/analytics": {
      "get": {
        "tags": ["Analytics"],
        "summary": "Get queue analytics (instance-specific)",
        "description": "Returns analytics data for a named queue instance.",
        "operationId": "getAnalyticsInstance",
        "parameters": [
          {
            "name": "instanceName",
            "in": "path",
            "required": true,
            "description": "The queue instance name",
            "schema": {
              "type": "string",
              "example": "default"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Analytics data retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Analytics"
                }
              }
            }
          },
          "503": {
            "description": "Analytics not available",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string",
                      "example": "Analytics not available"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/services/queueing/api/settings": {
      "get": {
        "tags": ["Settings"],
        "summary": "Get settings",
        "description": "Retrieves the current queue service settings.",
        "operationId": "getSettings",
        "responses": {
          "200": {
            "description": "Settings retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Settings"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Settings"],
        "summary": "Save settings",
        "description": "Saves the queue service settings.",
        "operationId": "saveSettings",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Settings"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Settings saved successfully",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string",
                  "example": "OK"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing settings",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    }
  }
}
